<!doctype>
<html ng-app="wms-builder">
  <head>
    <title>WMS Builder</title>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=drawing&sensor=false"></script>
    <script src="lib/jquery-2.0.3.min.js"></script>
    <script src="lib/xml2json.js"></script>
    <script src="lib/angular.min.js"></script>
    <script src="lib/angular-route.min.js"></script>
    <script src="js/wms-builder.js"></script>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-theme.min.css">
  </head>

  <body ng-controller="builder">
    <h1>WMS Builder</h1>

    <form>
      <fieldset>
        <label for="host">
          Select a WMS server:
          <select name="host" ng-model="host" ng-options="hostUrl as hostName for (hostName, hostUrl) in hosts"></select>
        </label>

        <label for="serviceType">
          Select a service type:
          <select name="serviceType" ng-model="serviceType" ng-options="serviceType for serviceType in serviceTypes"></select>
        </label>

        <label for="requestType">
          Select a request type:
          <select name="requestType" ng-model="requestType" ng-options="requestType as requestType for (requestType, request) in requestTypes"></select>
        </label> 

        <label for="format">
          Select an output format
          <select name="format" ng-model="format" ng-options="format for format in requestTypes[requestType].formats"></select>
        </label>  

        <fieldset class="row">
          <label>Input the geographic bounds for this request:</label>

          <label for="miny">
            South
            <input name="miny" ng-model="bbox.miny">
          </label>
          <label for="minx">
            West
            <input name="minx" ng-model="bbox.minx">
          </label>
          <label for="maxy">
            North
            <input name="maxy" ng-model="bbox.maxy">
          </label>
          <label for="maxx">
            East
            <input name="maxx" ng-model="bbox.maxx">
          </label>

          <label> Or use the map:</label>
          <div id="map" class="col-md-4"></div>
        </fieldset>
      </fieldset>
      
      <fieldset ng-show="serviceType == 'WMS'">
        <label for="layers">
          Select the layers to request:
          <select name="layers" ng-model="features" ng-options="name as name for (name, feature) in featureList"
            multiple="multiple" multiselect-dropdown></select>
        </label>

        <fieldset>
          Input image width and height:
          <label for="width">
            <input name="width" type="number" ng-model="width" step="10" min="0">
          </label>
          <label for="height">
            <input name="height" type="number" ng-model="height" step="10" min="0">
          </label>
        </fieldset>
      </fieldset>

      <fieldset ng-show="serviceType == 'WFS'">
        <label for="feature">
          Select the name of the feature type:
          <select name="feature" ng-model="feature" ng-options="name as name for (name, feature) in featureList"></select>
        </label>
        
        <label for="featureLimit">
          Maximum number of features for this request:
          <input name="featureLimit" type="number" ng-model="featureLimit"></input>
        </label>        
      </fieldset>
    </form>

    <p>
      WMS URL: <a ng-href="{{ url() }}">{{ url() }}</a>
    </p>
    <p>
      <img ng-src="{{ image(200) }}">
    </p>
  </body>
</html>
